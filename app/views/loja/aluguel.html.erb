<form action="/alugar/<%= @veiculo.id %>" method="POST" >
  <div class="col col-sm-12">
    <h1 style="width: 100%; text-align:center;">ALUGAR O VEÍCULO</h1>
    <hr>
    <br>
    <div class="col col-sm-8">
      <div class="card mb-3" style="background-color: #fbfbfb;">
        <div class="row no-gutters">
          <div class="col-md-8" style="display: flex;justify-content: center;align-items: center; padding:20px;">
            <img src="https://www.chevrolet.com.br/content/dam/chevrolet/mercosur/brazil/portuguese/index/cars/cars-subcontent/04-images/novo-onix-branco-summit.png" alt="..." style="width:100%;">
          </div>
          <div class="col-md-4" style="display: flex;justify-content: center;align-items: center; padding:20px;">
            <div class="card-body">
              <h3 class="card-title"><b><%= @veiculo.marca.nome %> <%= @veiculo.nome %></b></h3>
              <p class="card-text">Cor <%= @veiculo.cor%></p>
              <p class="card-text"><%= @veiculo.qnt_lugares%> lugares</p>
            </div>
          </div>
        </div>
        <hr style="border: 1px solid white;">
        <div class="row">
          <h4 style="width:100%;display: inline-block;text-align: center;font-weight: bold;">Incluso no preço:</h4>
          <ul>
            <li>Melhor preço garantido</li>
            <li>Sem taxa de alteração</li>
            <li>Taxa da locadora</li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Tabela fechar aluguel -->
    <div class="col col-sm-4">
      <div class="card mb-3">
        <div class="row no-gutters">
          <div class="card-body" style="padding:40px;display: flex;flex-direction: column;justify-content: space-evenly;">
            <div style="display: flex;flex-direction: column;align-items: center;">
              <h3><b><%= @veiculo.marca.nome %> <%= @veiculo.nome %></b></h3>
              <hr>
              <div class="form-group" style="width:100%; margin: 40px 0;">
                <div class="row" style="width: 100%;display: flex;justify-content: space-between;">
                  <label for="exampleFormControlSelect1">Valor/Dia</label>
                  <label for="exampleFormControlSelect1">Qnt Dias</label>
                </div>
                <div class="row" style="width: 100%;display: flex;justify-content: space-between;">
                  <p id="valorDia"><%= number_to_currency(@veiculo.valor) %></p>
                  <select id="dias" class="form-control"
                    style="max-width:65px;" 
                    name="dias" 
                    onChange="atualizaTotal(<%= @veiculo.valor %>)">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                  </select>
                </div>
              </div>
              <div class="form-group" style="text-align:center;">
                <h4 class="card-title"><b>Valor Total</b></h4>
                <h4 id="valorTotal"><%= number_to_currency(@veiculo.valor) %></h4>
              </div>
              <input class="btn btn-success" style="width:100%; margin-top: 40px;" type="submit" value="Pagar">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Dados do cartão  -->
    <h2 style="text-align:left;">Dados do cartão</h2>
    <div class="col col-sm-6">
      <div class="form-group">
        <label for="cardNumber">Número do cartão</label>
        <input type="number" class="form-control" name="cardNumber">
      </div>
      <div class="form-group">
        <label for="cardName">Nome no cartão</label>
        <input type="text" class="form-control" name="cardName">
      </div>
      <div class="form-group">
        <label for="expirationDate">Data de validade</label>
        <input type="date" class="form-control" name="expirationDate">
      </div>
      <div class="form-group">
        <label for="cvv">CVV</label>
        <input type="number" class="form-control" name="cvv">
      </div>
    </div>
  </div>
</form>
<!-- Funcao para calcular o valor total -->
<script>
  function atualizaTotal(valorVeiculo) {
    const qntDias = document.getElementById("dias").value;
    document.getElementById('valorTotal').innerText = `R$ ${parseInt(qntDias) * valorVeiculo}`;
  }
</script>
